:root{
  --safe-top: env(safe-area-inset-top, 8px);
  --safe-bot: env(safe-area-inset-bottom, 12px);

  --shoot-bottom: 28vh;
  --result-bottom: 28vh;

  --btn-w: 300px;
  --btn-h: 90px;
  --btn-gap: 36px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#000;color:#fff;font-family:system-ui,Arial,sans-serif}

/* ===== Aviso para apps ===== */
.inapp{
  position:fixed; inset:0; z-index:20;
  display:grid; place-items:center;
  background:rgba(0,0,0,.92); color:#fff; text-align:center; padding:20px;
}
.inapp .box{ max-width:620px }
.inapp .steps{ text-align:left;max-width:420px;margin:10px auto 0;padding-left:18px }
.inapp .btnrow{ display:flex; gap:12px; justify-content:center; margin-top:14px }
.inapp button{
  padding:12px 16px; border-radius:12px;
  border:1.5px solid #fff; background:transparent; color:#fff; cursor:pointer;
}

/* ===== TELA INICIAL ===== (só imagem + botão invisível) */
.start{
  position:fixed; inset:0; z-index:10; overflow:hidden;
  background:#000 center/cover no-repeat url("tela-inicial.png");
}
.start.busy{ cursor:progress; }
.start-hit{
  position:absolute; inset:0; border:0; background:transparent; cursor:pointer;
}

/* Barra superior */
.topbar{
  position:fixed; inset:0 0 auto 0; height:56px;
  padding: max(6px,var(--safe-top)) 10px 6px;
  display:flex; align-items:center; justify-content:space-between;
  background:linear-gradient(180deg,rgba(0,0,0,.45),transparent);
  z-index:5; pointer-events:none;
}
.spacer{width:1px;height:1px}
.iconimg{ pointer-events:auto; border:0; background:transparent; width:56px; height:56px; background-repeat:no-repeat; background-position:center; background-size:contain; }
.iconimg.flip{ background-image:url("botao-trocar.png"); }

/* ===== Palco com quadro 9:16 ===== */
.stage{
  position:fixed; inset:0; overflow:hidden;
  display:grid; place-items:center;
  background:#000;
}
.frame{
  position:relative;
  width:100vw; height: calc(100vw * 16/9);
  max-height:100vh; max-width: calc(100vh * 9/16);
  background:#000;
}
@media (min-aspect-ratio: 9/16){
  .frame{ height:100vh; width: calc(100vh * 9/16); }
}

/* Vídeo e moldura preenchem o frame (cover) */
.frame > #video,
.frame > .overlay{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit: cover;  /* ENCAIXE PERFEITO */
}

/* Botões (suas artes PNG) */
.btnimg{
  width:min(var(--btn-w), 80vw);
  height:var(--btn-h);
  background-repeat:no-repeat;
  background-position:center;
  background-size:contain;
  border:0; background-color:transparent;
  cursor:pointer;
}
.btnimg.foto{    background-image:url("botao-foto.png"); }
.btnimg.gravar{  background-image:url("botao-video.png"); }
.btnimg.salvar{  background-image:url("botao-salvar.png"); }
.btnimg.refazer{ background-image:url("botao-refazer.png"); }

/* Áreas dos botões (dentro do frame) */
.actions{
  position:absolute; left:0; right:0;
  display:flex; gap:var(--btn-gap); justify-content:center; align-items:center;
  z-index:4;
}
#shootArea { bottom:var(--shoot-bottom); }
#resultArea{ bottom:var(--result-bottom); }
#resultVideoArea{ bottom:var(--result-bottom); }

/* Indicador REC */
.rec{
  position:fixed; top:calc(8px + var(--safe-top)); left:10px;
  z-index:6;
  background:rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.35);
  padding:6px 10px; border-radius:10px;
  font-weight:700; letter-spacing:.5px;
}
.rec span{ margin-left:6px }

/* util */
.hidden{ display:none !important }
